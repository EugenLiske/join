<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: add_task/form_validation.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: add_task/form_validation.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const monthMaxDays = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];


/**
 * Checks whether all required fields are filled correctly to enable the submit button.
 *
 * @param {string} mode - The mode of the task form ("add_task" or "edit").
 * @returns {boolean} - True if all required fields are valid, otherwise false.
 */
function checkRequiredFieldsToEnableButton(mode = "add_task"){
    return checkTitle(false) &amp;&amp; simpleCheckDuedate() &amp;&amp; (mode === "add_task" ? checkCategory(false) : true);
}


/**
 * Validates all required fields with warning display if needed.
 *
 * @param {string} mode - The mode of the task form ("add_task" or "edit").
 * @returns {boolean} - True if all validations pass, otherwise false.
 */
function checkRequiredFields(mode = "add_task"){
    let isCorrectTitle = checkTitle();
    let isCorrectDuedate = checkDuedate();
    let isCorrectCategory = true;
    if (mode == "add_task"){
        isCorrectCategory = checkCategory();
    }

    return isCorrectTitle &amp;&amp; isCorrectDuedate &amp;&amp; isCorrectCategory;
}


function resetWarning(){
    removeOrAddWarning(document.getElementById("task_title_input"), "warning_title", true, "This field is required!");
    removeOrAddWarning(document.getElementById("task_deadline_input"), "warning_deadline", true, 0); 
    removeOrAddWarning(document.getElementById("category_selection"), "warning_category", true, "This field is required!");    
}


/**
 * Adds or removes warning messages and input styling based on validation result.
 *
 * @param {HTMLElement} element - The input element to highlight/unhighlight.
 * @param {string} warningId - The ID of the warning message container.
 * @param {boolean} isCorrect - Whether the field is valid.
 * @param {string} message - The warning message to display if invalid.
 */
function removeOrAddWarning(element, warningId, isCorrect, message){
    toggleInputErrorDesign(element, isCorrect);
    toggleWarning(warningId, isCorrect, message);
}


/**
 * Adds or removes a CSS class to visually indicate input validity.
 *
 * @param {HTMLElement} element - The input element to highlight/unhighlight.
 * @param {boolean} isCorrect - Whether the field is valid.
 */
function toggleInputErrorDesign(element, isCorrect){
    isCorrect ? element.classList.remove("taskerror") : element.classList.add("taskerror");
}


/**
 * Shows or hides a warning message based on validation result.
 *
 * @param {string} htmlId - The ID of the warning message element.
 * @param {boolean} isCorrect - Whether the field is valid.
 * @param {string} message - The warning message to set.
 */
function toggleWarning(htmlId, isCorrect, message){
    let messageRef = document.getElementById(htmlId);
    isCorrect ? messageRef.classList.add("d_none") : messageRef.classList.remove("d_none");
    messageRef.innerText = message;
}


// Check Title -----------------------------------------------------------------------

/**
 * Validates the task title field.
 *
 * @param {boolean} [setWarning=true] - Whether to show a warning message if invalid.
 * @returns {boolean} - True if the title is not empty, false otherwise.
 */
function checkTitle(setWarning = true){
    let titleInputRef = document.getElementById("task_title_input");
    let isCorrect = titleInputRef.value.length > 0;
    if (setWarning) removeOrAddWarning(titleInputRef, "warning_title", isCorrect, "This field is required!");
    return isCorrect;
}


// Check Category --------------------------------------------------------------------

/**
 * Validates the selected task category.
 *
 * @param {boolean} [setWarning=true] - Whether to show a warning message if invalid.
 * @returns {boolean} - True if a valid category is selected, false otherwise.
 */
function checkCategory(setWarning = true){
    let categoryButtonRef = document.getElementById("category_selection");
    let choice = categoryButtonRef.innerText;
    let isCorrect = ["User Story", "Technical Task"].indexOf(choice) >= 0 ? true : false;
    if (setWarning) removeOrAddWarning(categoryButtonRef, "warning_category", isCorrect, "This field is required!");

    return isCorrect;
}


// Check Date -------------------------------------------------------------------------

/**
 * Checks if the due date field is not empty.
 *
 * @returns {boolean} - True if a value is entered, false otherwise.
 */
function simpleCheckDuedate(){
    let duedateRef = document.getElementById("task_deadline_input");  
    let isCorrect = duedateRef.value.length > 0;

    return isCorrect;
}


/**
 * Validates the due date field including format and logical correctness.
 *
 * @returns {boolean} - True if the date is valid, false otherwise.
 */
function checkDuedate(){
    let duedateRef = document.getElementById("task_deadline_input");
    let errorNumber = dateValidation(duedateRef.value);
    let isCorrect = errorNumber == 0 ? true : false;
    removeOrAddWarning(duedateRef, "warning_deadline", isCorrect, getDateWarning(errorNumber));
    
    return isCorrect;
}


/**
 * Returns the appropriate warning message for a given date error code.
 *
 * @param {number} errorNumber - The code representing the validation error.
 * @returns {string} - The corresponding warning message.
 */
function getDateWarning(errorNumber){
    let message = "";
    switch (errorNumber) {
        case 1:
            message = "This field is required!";
            break;
        case 2:
            message = "Enter date as dd/mm/yyyy!";
            break;
        case 3:
            message = "This date does not exist!";
            break;
        case 4:
            message = "The date must be in the future!"
            break;
        default:
            message = ""
            break;
    }
    return message;
}


/**
 * Validates a date string and returns an error code.
 *
 * @param {string} date - The date string in dd/mm/yyyy format.
 * @returns {number} - Error code (0 = valid, 1–4 = various errors).
 */
function dateValidation(date) {
    if (date.length &lt;= 0) return 1;
    if (!checkDateFormat(date)) return 2;

    let strDateArr = date.split("/");
    let intDateArr = getIntDate(strDateArr);

    return checkDate(intDateArr[0], intDateArr[1], intDateArr[2]);
}


/**
 * Validates that the date is real and in the future.
 *
 * @param {number} day - Day of the date.
 * @param {number} month - Month of the date.
 * @param {number} year - Year of the date.
 * @returns {number} - Error code (0 = valid, 3 = invalid date, 4 = date not in future).
 */
function checkDate(day, month, year){
    if (!checkNumberInterval(day, month, year)) return 3;
    if (!isDateInFuture(day, month, year)) return 4;
    
    return 0;
}


/**
 * Determines whether the given year is a leap year.
 *
 * @param {number} year - The year to check.
 * @returns {boolean} - True if it's a leap year, false otherwise.
 */
function isLeapYear(year){
    return (year % 4 === 0 &amp;&amp; year % 100 !== 0) || (year % 400 === 0);
}


/**
 * Checks if the given day, month, and year form a valid date.
 *
 * @param {number} day - Day of the date.
 * @param {number} month - Month of the date.
 * @param {number} year - Year of the date.
 * @returns {boolean} - True if the date is valid, false otherwise.
 */
function checkNumberInterval(day, month, year){
    if (checkYear(year)){
        if (checkMonth(month)){
            if (month == 2){
                setFebruaryDays(year);
            }
            if (checkDay(day, month)){
                return true;
            }
        }
    }
    return false;
}


/**
 * Checks if the given date is in the future compared to today.
 *
 * @param {number} day - Day of the date.
 * @param {number} month - Month of the date.
 * @param {number} year - Year of the date.
 * @returns {boolean} - True if the date is in the future, false otherwise.
 */
function isDateInFuture(day, month, year){
    const d = new Date();
    const thisYear = d.getFullYear();
    const thisMonth = d.getMonth() + 1;
    const thisDay = d.getDate();
 
    return (year > thisYear || (year == thisYear &amp;&amp; (month > thisMonth || (month == thisMonth &amp;&amp; day >= thisDay))));
}


function checkYear(year){
    return year >= 1 &amp;&amp; year &lt;= 2100;
}


function checkMonth(month){
    return month >= 1 &amp;&amp; month &lt;= 12;
}


function setFebruaryDays(year){
    monthMaxDays[1] = isLeapYear(year) ? 29 : 28;
}


function checkDay(day, month){
    return day >= 1 &amp;&amp; day &lt;= monthMaxDays[month - 1];
}


/**
 * Checks whether a date string matches the format dd/mm/yyyy.
 *
 * @param {string} date - The date string to validate.
 * @returns {boolean} - True if the format is valid, false otherwise.
 */
function checkDateFormat(date){
    const pattern = /^(\d{2})\/(\d{2})\/(\d{4})$/;
    return pattern.test(date);
}


function getIntDate(strDateArr){
    return [parseInt(strDateArr[0], 10), parseInt(strDateArr[1], 10), parseInt(strDateArr[2], 10)];
}

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#BASE_URL">BASE_URL</a></li><li><a href="global.html#assignRandomAvatarColor">assignRandomAvatarColor</a></li><li><a href="global.html#checkCategory">checkCategory</a></li><li><a href="global.html#checkCategorySelection">checkCategorySelection</a></li><li><a href="global.html#checkDate">checkDate</a></li><li><a href="global.html#checkDateFormat">checkDateFormat</a></li><li><a href="global.html#checkDuedate">checkDuedate</a></li><li><a href="global.html#checkEmailExists">checkEmailExists</a></li><li><a href="global.html#checkEmailExistsForEdit">checkEmailExistsForEdit</a></li><li><a href="global.html#checkIfOldSubtaskExists">checkIfOldSubtaskExists</a></li><li><a href="global.html#checkLoginEnable">checkLoginEnable</a></li><li><a href="global.html#checkNumberInterval">checkNumberInterval</a></li><li><a href="global.html#checkRequiredFields">checkRequiredFields</a></li><li><a href="global.html#checkRequiredFieldsToEnableButton">checkRequiredFieldsToEnableButton</a></li><li><a href="global.html#checkSingleUserMatch">checkSingleUserMatch</a></li><li><a href="global.html#checkTitle">checkTitle</a></li><li><a href="global.html#clearFormInputs">clearFormInputs</a></li><li><a href="global.html#clearPriorityButtons">clearPriorityButtons</a></li><li><a href="global.html#closeEditContact">closeEditContact</a></li><li><a href="global.html#closeMobileActionMenu">closeMobileActionMenu</a></li><li><a href="global.html#createContactDropDownSearchList">createContactDropDownSearchList</a></li><li><a href="global.html#createContactDropDownSearchListElement">createContactDropDownSearchListElement</a></li><li><a href="global.html#createContactElement">createContactElement</a></li><li><a href="global.html#createSuccessOverlayLogin">createSuccessOverlayLogin</a></li><li><a href="global.html#createTask">createTask</a></li><li><a href="global.html#dateValidation">dateValidation</a></li><li><a href="global.html#deleteContact">deleteContact</a></li><li><a href="global.html#deleteContactFromFirebase">deleteContactFromFirebase</a></li><li><a href="global.html#deleteContactFromSuccessPage">deleteContactFromSuccessPage</a></li><li><a href="global.html#deleteSelectedContact">deleteSelectedContact</a></li><li><a href="global.html#displayContactDataInForm">displayContactDataInForm</a></li><li><a href="global.html#displayContactDetails">displayContactDetails</a></li><li><a href="global.html#displayContactsList">displayContactsList</a></li><li><a href="global.html#editContact">editContact</a></li><li><a href="global.html#editSelectedContact">editSelectedContact</a></li><li><a href="global.html#emailInput">emailInput</a></li><li><a href="global.html#extractSubtaskNrFromId">extractSubtaskNrFromId</a></li><li><a href="global.html#findMatchingUser">findMatchingUser</a></li><li><a href="global.html#generateInitials">generateInitials</a></li><li><a href="global.html#getAllUsers">getAllUsers</a></li><li><a href="global.html#getAssignedPersons">getAssignedPersons</a></li><li><a href="global.html#getCheckbox">getCheckbox</a></li><li><a href="global.html#getCheckboxImg">getCheckboxImg</a></li><li><a href="global.html#getContactNameSearchIndices">getContactNameSearchIndices</a></li><li><a href="global.html#getCurrentPriority">getCurrentPriority</a></li><li><a href="global.html#getDateWarning">getDateWarning</a></li><li><a href="global.html#getDescription">getDescription</a></li><li><a href="global.html#getDuedate">getDuedate</a></li><li><a href="global.html#getFirstThreeAssignments">getFirstThreeAssignments</a></li><li><a href="global.html#getFormData">getFormData</a></li><li><a href="global.html#getNextContactId">getNextContactId</a></li><li><a href="global.html#getProgressbarTemplate">getProgressbarTemplate</a></li><li><a href="global.html#getSingleSubtask">getSingleSubtask</a></li><li><a href="global.html#getSubtaskTxt">getSubtaskTxt</a></li><li><a href="global.html#getSubtasks">getSubtasks</a></li><li><a href="global.html#getTitle">getTitle</a></li><li><a href="global.html#groupContactsByLetter">groupContactsByLetter</a></li><li><a href="global.html#handleContactLoadError">handleContactLoadError</a></li><li><a href="global.html#handleCreateMode">handleCreateMode</a></li><li><a href="global.html#handleEditMode">handleEditMode</a></li><li><a href="global.html#handleLoginPasswordInput">handleLoginPasswordInput</a></li><li><a href="global.html#hideSelectionList">hideSelectionList</a></li><li><a href="global.html#initAddTaskOverlay">initAddTaskOverlay</a></li><li><a href="global.html#initAddTaskPage">initAddTaskPage</a></li><li><a href="global.html#initAssignedPersons">initAssignedPersons</a></li><li><a href="global.html#initContactSearchList">initContactSearchList</a></li><li><a href="global.html#initLoginAutoFill">initLoginAutoFill</a></li><li><a href="global.html#initTaskForm">initTaskForm</a></li><li><a href="global.html#initializeEventListeners">initializeEventListeners</a></li><li><a href="global.html#initializeMobileResizeHandler">initializeMobileResizeHandler</a></li><li><a href="global.html#isDateInFuture">isDateInFuture</a></li><li><a href="global.html#isEmailValid">isEmailValid</a></li><li><a href="global.html#isLeapYear">isLeapYear</a></li><li><a href="global.html#loadAllContacts">loadAllContacts</a></li><li><a href="global.html#loadContactDataForEditPage">loadContactDataForEditPage</a></li><li><a href="global.html#loadContactDataForSuccessPage">loadContactDataForSuccessPage</a></li><li><a href="global.html#loadContactForEdit">loadContactForEdit</a></li><li><a href="global.html#loadContactScripts">loadContactScripts</a></li><li><a href="global.html#loadExistingContact">loadExistingContact</a></li><li><a href="global.html#loginButton">loginButton</a></li><li><a href="global.html#loginErrorContainer">loginErrorContainer</a></li><li><a href="global.html#loginGuest">loginGuest</a></li><li><a href="global.html#loginPwdIcon">loginPwdIcon</a></li><li><a href="global.html#loginUser">loginUser</a></li><li><a href="global.html#navigateToSuccessPage">navigateToSuccessPage</a></li><li><a href="global.html#openAddContactOverlay">openAddContactOverlay</a></li><li><a href="global.html#openMobileActionMenu">openMobileActionMenu</a></li><li><a href="global.html#overlayMessage">overlayMessage</a></li><li><a href="global.html#passwordIcon">passwordIcon</a></li><li><a href="global.html#passwordInput">passwordInput</a></li><li><a href="global.html#passwordInputField">passwordInputField</a></li><li><a href="global.html#removeDarkFixedLogoAfterAnimation">removeDarkFixedLogoAfterAnimation</a></li><li><a href="global.html#removeLightLogoAfterSplash">removeLightLogoAfterSplash</a></li><li><a href="global.html#removeOrAddWarning">removeOrAddWarning</a></li><li><a href="global.html#renderPersonIconsList">renderPersonIconsList</a></li><li><a href="global.html#resetExistingLoginError">resetExistingLoginError</a></li><li><a href="global.html#saveContact">saveContact</a></li><li><a href="global.html#saveContactToFirebase">saveContactToFirebase</a></li><li><a href="global.html#saveEditContactToFirebase">saveEditContactToFirebase</a></li><li><a href="global.html#selectContact">selectContact</a></li><li><a href="global.html#selectContactById">selectContactById</a></li><li><a href="global.html#selectPerson">selectPerson</a></li><li><a href="global.html#setAllButtonInactive">setAllButtonInactive</a></li><li><a href="global.html#setCurrentUserData">setCurrentUserData</a></li><li><a href="global.html#setDefaultIconPriority">setDefaultIconPriority</a></li><li><a href="global.html#setIconPriority">setIconPriority</a></li><li><a href="global.html#setPriorityButtonDefault">setPriorityButtonDefault</a></li><li><a href="global.html#setupClickOutsideToClose">setupClickOutsideToClose</a></li><li><a href="global.html#showCategorySelection">showCategorySelection</a></li><li><a href="global.html#showEmptyState">showEmptyState</a></li><li><a href="global.html#showErrorState">showErrorState</a></li><li><a href="global.html#showGenericLoginError">showGenericLoginError</a></li><li><a href="global.html#showLoadingState">showLoadingState</a></li><li><a href="global.html#showLoginErrorAndStop">showLoginErrorAndStop</a></li><li><a href="global.html#showMobileContactList">showMobileContactList</a></li><li><a href="global.html#showOverlayMessage">showOverlayMessage</a></li><li><a href="global.html#showStaticLogoAfterAnimation">showStaticLogoAfterAnimation</a></li><li><a href="global.html#showToastMessage">showToastMessage</a></li><li><a href="global.html#signupOverlay">signupOverlay</a></li><li><a href="global.html#simpleCheckDuedate">simpleCheckDuedate</a></li><li><a href="global.html#smoothLogoHandover">smoothLogoHandover</a></li><li><a href="global.html#storeUserInitials">storeUserInitials</a></li><li><a href="global.html#toggleCheckbox">toggleCheckbox</a></li><li><a href="global.html#toggleDropDownIcon">toggleDropDownIcon</a></li><li><a href="global.html#toggleDropDownSelection">toggleDropDownSelection</a></li><li><a href="global.html#toggleInputErrorDesign">toggleInputErrorDesign</a></li><li><a href="global.html#toggleLoginVisibility">toggleLoginVisibility</a></li><li><a href="global.html#toggleMobileActionMenu">toggleMobileActionMenu</a></li><li><a href="global.html#togglePriorityButtons">togglePriorityButtons</a></li><li><a href="global.html#toggleWarning">toggleWarning</a></li><li><a href="global.html#updateAvatarPreview">updateAvatarPreview</a></li><li><a href="global.html#updateButtonState">updateButtonState</a></li><li><a href="global.html#updateFieldValidation">updateFieldValidation</a></li><li><a href="global.html#updateSaveButtonState">updateSaveButtonState</a></li><li><a href="global.html#validateContactForm">validateContactForm</a></li><li><a href="global.html#validateEmail">validateEmail</a></li><li><a href="global.html#validateName">validateName</a></li><li><a href="global.html#validatePhone">validatePhone</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Mon Oct 06 2025 14:22:22 GMT+0200 (Mitteleuropäische Sommerzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
