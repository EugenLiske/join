<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: add_task/form_selection/assigned_to.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: add_task/form_selection/assigned_to.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>
/**
 * Fetches contacts using the getContacts function, extracts their names, and returns them as an array.
 *
 * @async
 * @returns {Promise&lt;string[]>} A promise that resolves to an array of contact names. Returns an empty array if no contacts are found.
 */
async function initContactSearchList(){
    const contacts = await getContacts();
    if (!contacts) return [];
    const names = Object.values(contacts).map(c => c.name);
    return names;
}


/**
 * Initializes an array of boolean flags for assigned persons.
 * Each flag corresponds to a person in the provided names array and is initially set to false.
 *
 * @param {string[]} names - An array of person names to assign flags for.
 * @returns {boolean[]} An array of boolean flags, all initialized to false.
 */
function initAssignedPersons(names){
    return Array(names.length).fill(false);
}


/**
 * Searches for contacts in the provided name list that include the given input string (case-insensitive).
 *
 * @param {string} input - The search string to look for within the contact names.
 * @param {string[]} nameList - An array of contact names to search through.
 * @returns {number[]} An array of indices representing the positions in nameList where the contact name includes the input string.
 */
function getContactNameSearchIndices(input, nameList){
    let searchResult = [];
    const lowerInput = input.toLowerCase();
    for (let personIdx = 0; personIdx &lt; nameList.length; personIdx++) {
        if (nameList[personIdx].toLowerCase().includes(lowerInput)){
            searchResult.push(personIdx);
        }
    }
    return searchResult;
}


/**
 * Renders a dropdown search list of contacts for assignment selection.
 *
 * @param {number[]} searchedPersons - Array of indices representing the filtered/search-matched persons.
 * @param {boolean[]} assignedList - Array indicating whether each person is currently assigned (true) or not (false).
 * @param {Object} contacts - Object containing all available contacts, keyed by unique identifiers.
 */
function createContactDropDownSearchList(searchedPersons, assignedList, contacts){
    let personSelectionRef = document.getElementById("selection");
    let selection = "";
    let contactKeys = Object.keys(contacts);
    
    for (let searchIdx = 0; searchIdx &lt; searchedPersons.length; searchIdx++) {
        selection += createContactDropDownSearchListElement(searchedPersons, assignedList, searchIdx, contacts, contactKeys);
    }
    personSelectionRef.innerHTML = selection;
}


/**
 * Creates a dropdown list element for a contact in the "Assigned To" search list.
 *
 * @param {number[]} searchedPersons - Array of indices representing the filtered/search-matched persons.
 * @param {boolean[]} assignedList - Array indicating whether each person is currently assigned (true) or not (false).
 * @param {number} searchIdx - Index in the searchedPersons array for the current person.
 * @param {Object} contacts - Object containing contact data, keyed by contactKeys.
 * @param {string[]} contactKeys - Array of keys to access contacts in the contacts object.
 * @returns {string} The HTML string for the dropdown list element if the contact has a valid id, otherwise an empty string.
 */
function createContactDropDownSearchListElement(searchedPersons, assignedList, searchIdx, contacts, contactKeys){
    const personIdx = searchedPersons[searchIdx];
    const assignedTo = assignedList[personIdx];
    const selectedDesignClass = assignedTo == true ? "person_selected" : "";

    if (contacts[contactKeys[personIdx]].id !== undefined &amp;&amp; contacts[contactKeys[personIdx]].id !== null){
        return getListElementTemplate(selectedDesignClass, personIdx, "contact_" + contacts[contactKeys[personIdx]].id, assignedTo, contacts);
    }   
    return ""; 
}


/**
 * Returns the fourth child node (index 3) of the given parent element, 
 * which is assumed to be a checkbox element.
 *
 * @param {HTMLElement} parent - The parent DOM element containing the checkbox.
 * @returns {Node} The checkbox node at index 3 of the parent's childNodes.
 */
function getCheckbox(parent){
    return parent.childNodes[3];
}


/**
 * Toggles the checkbox image source based on the checked state.
 *
 * @param {boolean} checked - Indicates whether the checkbox is checked.
 * @param {HTMLImageElement} checkbox - The image element representing the checkbox.
 */
function toggleCheckbox(checked, checkbox){
    checkbox.src = getCheckboxImg(checked);
}


/**
 * Returns the file path of the checkbox image based on the checked state.
 *
 * @param {boolean} checked - Indicates whether the checkbox is checked.
 * @returns {string} The file path to the appropriate checkbox image.
 */
function getCheckboxImg(checked){
    return checked ? "../assets/img/icons/task/checkbox_tick.svg" : "../assets/img/icons/task/checkbox.svg";
}


function togglePersonIconsList(){
    document.getElementById("selected_persons").classList.toggle("d_none");
}


/**
 * Renders a list of person icons representing assigned contacts into the DOM element with the ID "selected_persons".
 * Displays up to three assigned contacts as icons, and if there are more than three, adds a "+ N" icon to indicate additional assignments.
 *
 * @param {boolean[]} assignedList - The list of assigned contact identifiers.
 * @param {Object} contacts - The list of all contact objects.
 */
function renderPersonIconsList(assignedList, contacts){
    const selectedPersonContainer = document.getElementById("selected_persons");

    const firstThreeAssignments = {"counter": 0, "htmlTemplate": ""};
    getFirstThreeAssignments(firstThreeAssignments, assignedList, contacts);
    
    if (firstThreeAssignments.counter > 3){
        firstThreeAssignments.htmlTemplate += getAssignedToIconTemplate("grey", "+ " + (firstThreeAssignments.counter-3));
    }
    selectedPersonContainer.innerHTML = firstThreeAssignments.htmlTemplate;
}


/**
 * Updates the `firstThreeAssignments` object by incrementing its counter and appending HTML templates
 * for up to the first three assigned contacts from the `assignedList`. For each assigned contact,
 * it generates an icon template using the contact's avatar color and initials.
 *
 * @param {Object} firstThreeAssignments - An object containing a `counter` (number) and `htmlTemplate` (string) property.
 * @param {boolean[]} assignedList - An array indicating which contacts are assigned (true) or not (false).
 * @param {Object} contacts - An object where keys are contact identifiers and values are contact objects with at least `avatarColor` and `name` properties.
 */
function getFirstThreeAssignments(firstThreeAssignments, assignedList, contacts){
    const contactsKeys = Object.keys(contacts);
    
    for (let persIdx = 0; persIdx &lt; assignedList.length; persIdx++) {
        if (assignedList[persIdx]){
            firstThreeAssignments.counter++;
            if (firstThreeAssignments.counter &lt;= 3){
                firstThreeAssignments.htmlTemplate += getAssignedToIconTemplate(contacts[contactsKeys[persIdx]].avatarColor, generateInitials(contacts[contactsKeys[persIdx]].name));
            }
        }
    }
}


function clearPersonIcons(){
    document.getElementById("selected_persons").innerHTML = "";
    document.getElementById("selected_persons").classList.remove("d_none");
}


function defaultAssignedInput(){
    document.getElementById("task_assignedto_button").classList.remove("d_none");
    document.getElementById("task_assignedto_input").classList.add("d_none");    
}

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#BASE_URL">BASE_URL</a></li><li><a href="global.html#assignRandomAvatarColor">assignRandomAvatarColor</a></li><li><a href="global.html#checkCategory">checkCategory</a></li><li><a href="global.html#checkCategorySelection">checkCategorySelection</a></li><li><a href="global.html#checkDate">checkDate</a></li><li><a href="global.html#checkDateFormat">checkDateFormat</a></li><li><a href="global.html#checkDuedate">checkDuedate</a></li><li><a href="global.html#checkEmailExists">checkEmailExists</a></li><li><a href="global.html#checkEmailExistsForEdit">checkEmailExistsForEdit</a></li><li><a href="global.html#checkIfOldSubtaskExists">checkIfOldSubtaskExists</a></li><li><a href="global.html#checkLoginEnable">checkLoginEnable</a></li><li><a href="global.html#checkNumberInterval">checkNumberInterval</a></li><li><a href="global.html#checkRequiredFields">checkRequiredFields</a></li><li><a href="global.html#checkRequiredFieldsToEnableButton">checkRequiredFieldsToEnableButton</a></li><li><a href="global.html#checkSingleUserMatch">checkSingleUserMatch</a></li><li><a href="global.html#checkTitle">checkTitle</a></li><li><a href="global.html#clearFormInputs">clearFormInputs</a></li><li><a href="global.html#clearPriorityButtons">clearPriorityButtons</a></li><li><a href="global.html#closeEditContact">closeEditContact</a></li><li><a href="global.html#closeMobileActionMenu">closeMobileActionMenu</a></li><li><a href="global.html#createContactDropDownSearchList">createContactDropDownSearchList</a></li><li><a href="global.html#createContactDropDownSearchListElement">createContactDropDownSearchListElement</a></li><li><a href="global.html#createContactElement">createContactElement</a></li><li><a href="global.html#createSuccessOverlayLogin">createSuccessOverlayLogin</a></li><li><a href="global.html#createTask">createTask</a></li><li><a href="global.html#dateValidation">dateValidation</a></li><li><a href="global.html#deleteContact">deleteContact</a></li><li><a href="global.html#deleteContactFromFirebase">deleteContactFromFirebase</a></li><li><a href="global.html#deleteContactFromSuccessPage">deleteContactFromSuccessPage</a></li><li><a href="global.html#deleteSelectedContact">deleteSelectedContact</a></li><li><a href="global.html#displayContactDataInForm">displayContactDataInForm</a></li><li><a href="global.html#displayContactDetails">displayContactDetails</a></li><li><a href="global.html#displayContactsList">displayContactsList</a></li><li><a href="global.html#editContact">editContact</a></li><li><a href="global.html#editSelectedContact">editSelectedContact</a></li><li><a href="global.html#emailInput">emailInput</a></li><li><a href="global.html#extractSubtaskNrFromId">extractSubtaskNrFromId</a></li><li><a href="global.html#findMatchingUser">findMatchingUser</a></li><li><a href="global.html#generateInitials">generateInitials</a></li><li><a href="global.html#getAllUsers">getAllUsers</a></li><li><a href="global.html#getAssignedPersons">getAssignedPersons</a></li><li><a href="global.html#getCheckbox">getCheckbox</a></li><li><a href="global.html#getCheckboxImg">getCheckboxImg</a></li><li><a href="global.html#getContactNameSearchIndices">getContactNameSearchIndices</a></li><li><a href="global.html#getCurrentPriority">getCurrentPriority</a></li><li><a href="global.html#getDateWarning">getDateWarning</a></li><li><a href="global.html#getDescription">getDescription</a></li><li><a href="global.html#getDuedate">getDuedate</a></li><li><a href="global.html#getFirstThreeAssignments">getFirstThreeAssignments</a></li><li><a href="global.html#getFormData">getFormData</a></li><li><a href="global.html#getNextContactId">getNextContactId</a></li><li><a href="global.html#getProgressbarTemplate">getProgressbarTemplate</a></li><li><a href="global.html#getSingleSubtask">getSingleSubtask</a></li><li><a href="global.html#getSubtaskTxt">getSubtaskTxt</a></li><li><a href="global.html#getSubtasks">getSubtasks</a></li><li><a href="global.html#getTitle">getTitle</a></li><li><a href="global.html#groupContactsByLetter">groupContactsByLetter</a></li><li><a href="global.html#handleContactLoadError">handleContactLoadError</a></li><li><a href="global.html#handleCreateMode">handleCreateMode</a></li><li><a href="global.html#handleEditMode">handleEditMode</a></li><li><a href="global.html#handleLoginPasswordInput">handleLoginPasswordInput</a></li><li><a href="global.html#hideSelectionList">hideSelectionList</a></li><li><a href="global.html#initAddTaskOverlay">initAddTaskOverlay</a></li><li><a href="global.html#initAddTaskPage">initAddTaskPage</a></li><li><a href="global.html#initAssignedPersons">initAssignedPersons</a></li><li><a href="global.html#initContactSearchList">initContactSearchList</a></li><li><a href="global.html#initLoginAutoFill">initLoginAutoFill</a></li><li><a href="global.html#initTaskForm">initTaskForm</a></li><li><a href="global.html#initializeEventListeners">initializeEventListeners</a></li><li><a href="global.html#initializeMobileResizeHandler">initializeMobileResizeHandler</a></li><li><a href="global.html#isDateInFuture">isDateInFuture</a></li><li><a href="global.html#isEmailValid">isEmailValid</a></li><li><a href="global.html#isLeapYear">isLeapYear</a></li><li><a href="global.html#loadAllContacts">loadAllContacts</a></li><li><a href="global.html#loadContactDataForEditPage">loadContactDataForEditPage</a></li><li><a href="global.html#loadContactDataForSuccessPage">loadContactDataForSuccessPage</a></li><li><a href="global.html#loadContactForEdit">loadContactForEdit</a></li><li><a href="global.html#loadContactScripts">loadContactScripts</a></li><li><a href="global.html#loadExistingContact">loadExistingContact</a></li><li><a href="global.html#loginButton">loginButton</a></li><li><a href="global.html#loginErrorContainer">loginErrorContainer</a></li><li><a href="global.html#loginGuest">loginGuest</a></li><li><a href="global.html#loginPwdIcon">loginPwdIcon</a></li><li><a href="global.html#loginUser">loginUser</a></li><li><a href="global.html#navigateToSuccessPage">navigateToSuccessPage</a></li><li><a href="global.html#openAddContactOverlay">openAddContactOverlay</a></li><li><a href="global.html#openMobileActionMenu">openMobileActionMenu</a></li><li><a href="global.html#overlayMessage">overlayMessage</a></li><li><a href="global.html#passwordIcon">passwordIcon</a></li><li><a href="global.html#passwordInput">passwordInput</a></li><li><a href="global.html#passwordInputField">passwordInputField</a></li><li><a href="global.html#removeDarkFixedLogoAfterAnimation">removeDarkFixedLogoAfterAnimation</a></li><li><a href="global.html#removeLightLogoAfterSplash">removeLightLogoAfterSplash</a></li><li><a href="global.html#removeOrAddWarning">removeOrAddWarning</a></li><li><a href="global.html#renderPersonIconsList">renderPersonIconsList</a></li><li><a href="global.html#resetExistingLoginError">resetExistingLoginError</a></li><li><a href="global.html#saveContact">saveContact</a></li><li><a href="global.html#saveContactToFirebase">saveContactToFirebase</a></li><li><a href="global.html#saveEditContactToFirebase">saveEditContactToFirebase</a></li><li><a href="global.html#selectContact">selectContact</a></li><li><a href="global.html#selectContactById">selectContactById</a></li><li><a href="global.html#selectPerson">selectPerson</a></li><li><a href="global.html#setAllButtonInactive">setAllButtonInactive</a></li><li><a href="global.html#setCurrentUserData">setCurrentUserData</a></li><li><a href="global.html#setDefaultIconPriority">setDefaultIconPriority</a></li><li><a href="global.html#setIconPriority">setIconPriority</a></li><li><a href="global.html#setPriorityButtonDefault">setPriorityButtonDefault</a></li><li><a href="global.html#setupClickOutsideToClose">setupClickOutsideToClose</a></li><li><a href="global.html#showCategorySelection">showCategorySelection</a></li><li><a href="global.html#showEmptyState">showEmptyState</a></li><li><a href="global.html#showErrorState">showErrorState</a></li><li><a href="global.html#showGenericLoginError">showGenericLoginError</a></li><li><a href="global.html#showLoadingState">showLoadingState</a></li><li><a href="global.html#showLoginErrorAndStop">showLoginErrorAndStop</a></li><li><a href="global.html#showMobileContactList">showMobileContactList</a></li><li><a href="global.html#showOverlayMessage">showOverlayMessage</a></li><li><a href="global.html#showStaticLogoAfterAnimation">showStaticLogoAfterAnimation</a></li><li><a href="global.html#showToastMessage">showToastMessage</a></li><li><a href="global.html#signupOverlay">signupOverlay</a></li><li><a href="global.html#simpleCheckDuedate">simpleCheckDuedate</a></li><li><a href="global.html#smoothLogoHandover">smoothLogoHandover</a></li><li><a href="global.html#storeUserInitials">storeUserInitials</a></li><li><a href="global.html#toggleCheckbox">toggleCheckbox</a></li><li><a href="global.html#toggleDropDownIcon">toggleDropDownIcon</a></li><li><a href="global.html#toggleDropDownSelection">toggleDropDownSelection</a></li><li><a href="global.html#toggleInputErrorDesign">toggleInputErrorDesign</a></li><li><a href="global.html#toggleLoginVisibility">toggleLoginVisibility</a></li><li><a href="global.html#toggleMobileActionMenu">toggleMobileActionMenu</a></li><li><a href="global.html#togglePriorityButtons">togglePriorityButtons</a></li><li><a href="global.html#toggleWarning">toggleWarning</a></li><li><a href="global.html#updateAvatarPreview">updateAvatarPreview</a></li><li><a href="global.html#updateButtonState">updateButtonState</a></li><li><a href="global.html#updateFieldValidation">updateFieldValidation</a></li><li><a href="global.html#updateSaveButtonState">updateSaveButtonState</a></li><li><a href="global.html#validateContactForm">validateContactForm</a></li><li><a href="global.html#validateEmail">validateEmail</a></li><li><a href="global.html#validateName">validateName</a></li><li><a href="global.html#validatePhone">validatePhone</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Mon Oct 06 2025 14:22:22 GMT+0200 (Mitteleuropäische Sommerzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
